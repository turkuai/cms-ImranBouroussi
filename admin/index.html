<!DOCTYPE html>
<html>

<head>
    <title>Paasivu</title>
    <link rel="stylesheet" href="../index.css">

    <script>

        function handleParagraphEdit(id = "title") {
            let isEditing = localStorage.getItem(`editMode-${id}`) === "true";
            isEditing = !isEditing;

            const element = document.getElementById(id);
            const input = document.getElementById(`${id}Input`);
            const button = document.getElementById(`${id}Button`);

            if (!isEditing) {
                const value = input.value;
                element.innerHTML = value;
                localStorage.setItem(id, value);
            }

            element.hidden = isEditing;
            input.hidden = !isEditing;
            button.innerHTML = isEditing ? "Save" : "Edit";
            localStorage.setItem(`editMode-${id}`, isEditing);
        }

        const savedLinks = localStorage.getItem("links-list");
        const linksList = savedLinks ? JSON.parse(savedLinks) : [];

        function handleLoad() {

            const ids = ["title", "articleTitle1", "articleTitle2"];

            ids.forEach(id => {
                const value = localStorage.getItem(id);
                const element = document.getElementById(id);
                const input = document.getElementById(`${id}Input`);
                if (value && element && input) {
                    element.innerHTML = value;
                    input.value = value;
                }
            });



            const listElement = document.getElementById("link-list");
            linksList.forEach(linkJson => {
                const aElement = document.createElement("a");
                aElement.innerHTML = linkJson.name;
                aElement.href = linkJson.href;
                listElement.appendChild(aElement);
            });
        }

        function handleAddLink(e) {
            const button = e.target;
            const editMode = button.innerHTML === "+";
            const inputHidden = !editMode;

            const refInput = document.getElementById("linkRef");
            const nameInput = document.getElementById("linkName");

            refInput.hidden = inputHidden;
            nameInput.hidden = inputHidden;

            if (editMode) {
                button.innerHTML = "Save";
            } else {
                button.innerHTML = "+";

                const listElement = document.getElementById("link-list");

                const aElement = document.createElement("a");
                aElement.innerHTML = nameInput.value;
                aElement.href = refInput.value;

                listElement.appendChild(aElement);

                const linkJson = {
                    href: refInput.value,
                    name: nameInput.value,
                };
                linksList.push(linkJson);

                localStorage.setItem("links-list", JSON.stringify(linksList));
            }
        }

        addEventListener("load", handleLoad);
    </script>
</head>

<body>

    <header>
        <div class="logo">
            <img class="king" src="https://logos-world.net/wp-content/uploads/2020/10/Nokia-Logo.png" alt="Logo"
                id="logo">
            <input id="logoInput" hidden>
            <button onclick="handleLogoEdit()">Edit</button>
        </div>
        <div class="text">
            <a href="#">Home</a> <a href="#">About</a> <a href="#">Blog</a>
        </div>
    </header>

    <div class="main">
        <div class="container">

            <div class="article">
                <div class="article-text">
                    <h1 id="articleTitle1"></h1>
                    <input id="articleTitle1Input" hidden>
                    <button id="articleTitle1Button" onclick="handleParagraphEdit('articleTitle1')">Edit</button>

                    <p class="artikkeli"></p>

                    <button id="articletextButton" onclick=""></button>

                </div>

                <div class="article-image">

                </div>

            </div>

            <div class="add-article">
                <input id="articleTitleInput" placeholder="Article Title">
                <textarea id="articleContentInput" placeholder="Article Content"></textarea>
                <button onclick="handleAddArticle()">+</button>
            </div>

            <div id="articles-list"></div>

        </div>

    </div>

    <footer class="footer">
        <div class="footer-left">
            <p id="title"></p>
            <input id="titleInput" hidden>
            <button id="titleButton" onclick="handleParagraphEdit('title')">Edit</button>
            <p>Company Details: Address, Contact Info</p>
        </div>
        <div id="link-list" class="footer-right">
        </div>
        <div class="footer-right">
            <div>
                <input id="linkRef" placeholder="URL" hidden>
                <input id="linkName" placeholder="Name" hidden>
            </div>
            <button onclick="handleAddLink(event)">+</button>
        </div>
    </footer>

</body>

</html>